  # （1）普通用户： SCOTT （密码：tiger）
  #（2）普通管理员：SYSTEM（密码：manager）
  #（3）超级管理员：SYS （密码：change_on_install）



创建表空间:
 create tablespace judp datafile 'D:\oracle\dbms\oradata\orcl\judp.DBF' size 16G autoextend on next 5G
创建用户
 create user judp identified by judp123 default tablespace judp temporary tablespace temp

授权
 grant connect to judp
 grant resource to judp
 grant dba to judp


导出库
exp judp/judp123@orcl file=D:\oracle-judp20230317.dmp log=D:\oracle.log
导入
imp judp/judp123@orcl full=y file=D:\数据库导入导出\oracle-judp20230317.dmp


创建表空间:
 create tablespace judp datafile 'D:\oracle\dbms\oradata\orcl\judp.DBF' size 16G autoextend on next 5G
 create tablespace confluence datafile 'D:\oracle\dbms\oradata\orcl\confluence.DBF' size 16G autoextend on next 5G
 create tablespace jira datafile 'D:\oracle\dbms\oradata\orcl\jira.DBF' size 16G autoextend on next 5G
创建用户
 create user judp identified by judp123 default tablespace judp temporary tablespace temp
 create user confluence identified by confluence default tablespace confluence temporary tablespace temp
 create user jira identified by jira default tablespace jira temporary tablespace temp

授权
 grant connect, resource to judp  -- 角色: 包含 create session 权限
 grant create session to judp  -- 权限: 属于 connect 角色
 grant resource to judp
 grant dba to judp
 grant create table to judp
 -- , drop, insert, update
 grant drop any table to judp
 grant insert any table to judp
 grant update any table to judp


导出库
exp judp/judp123@orcl file=D:\oracle-judp20230317.dmp log=D:\oracle.log
导入
imp judp/judp123@orcl full=y file=D:\数据库导入导出\\240\judp20230318.dmp
imp confluence/confluence@orcl full=y file=D:\数据库导入导出\\240\confluence20230318.dm
imp jira/jira@orcl full=y file=D:\数据库导入导出\\240\jira20230318.dmp


drop tablespace judp INCLUDING CONTENTS and datafiles;
-- 删除用户
1. 锁定用户
  alter user judp account lock;
2. 查询、删除用户进程号
  select * from v$session where username = 'judp'
select USERNAME, SID,SERIAL#
from V$SESSION;

-- sid,serial#
alter system kill session '84,723' immediate

3. 删除用户及表空间
  drop user judp cascade;








Oracle11G用EXP导出时,空表不能导出解决：

11G中有个新特性，当表无数据时，不分配segment，以节省空间

解决：
方法一：insert一行，再rollback就产生segment了
该方法是在在空表中插入数据，再删除，则产生segment。导出时则可导出空表。

方法二：设置deferred_segment_creation 参数

 show parameter deferred_segment_creation
  NAME                                 TYPE        VALUE
  ------------------------------------ ----------- ------------------------------
  deferred_segment_creation            boolean     TRUE

alter system set deferred_segment_creation=false;
  系统已更改。
show parameter deferred_segment_creation
  NAME                                 TYPE        VALUE
  ------------------------------------ ----------- ------------------------------
  deferred_segment_creation            boolean     FALSE
该参数值默认是TRUE，当改为FALSE时，无论是空表还是非空表，都分配segment。
注意：该值设置后对以前导入的空表不起作用，仍不能导出，只能对后面新增的表起作用。
如需导出之前的空表，只能用第一种方法。
方法三：

先查询一下当前用户下的所有空表
    select table_name from user_tables where NUM_ROWS=0;
用以下这句查找空表
    select 'alter table '||table_name||' allocate extent;' from user_tables where num_rows=0
把查询结果导出，执行导出的语句
'ALTERTABLE'||TABLE_NAME||'ALLOCATEEXTENT;'
 -----------------------------------------------------------
 alter table AQ$_AQ$_MEM_MC_H allocate extent;
 alter table AQ$_AQ$_MEM_MC_G allocate extent;
 alter table AQ$_AQ$_MEM_MC_I allocate extent;
 alter table AQ$_AQ_PROP_TABLE_T allocate extent;
 alter table AQ$_AQ_PROP_TABLE_H allocate extent;
 alter table AQ$_AQ_PROP_TABLE_G allocate extent;
 alter table AQ$_AQ_PROP_TABLE_I allocate extent;
 alter table AQ$_KUPC$DATAPUMP_QUETAB_T allocate extent;
 alter table AQ$_KUPC$DATAPUMP_QUETAB_H allocate extent;
 alter table AQ$_KUPC$DATAPUMP_QUETAB_G allocate extent;
 alter table AQ$_KUPC$DATAPUMP_QUETAB_I allocate extent;

 'ALTERTABLE'||TABLE_NAME||'ALLOCATEEXTENT;'
 -----------------------------------------------------------
 alter table AQ$_SYS$SERVICE_METRICS_TAB_T allocate extent;
 alter table AQ$_SYS$SERVICE_METRICS_TAB_H allocate extent;
 alter table AQ$_SYS$SERVICE_METRICS_TAB_G allocate extent;
 alter table AQ$_SYS$SERVICE_METRICS_TAB_I allocate extent;


然后再执行
  exp 用户名/密码@数据库名 file=/home/oracle/exp.dmp log=/home/oracle/exp_smsrun.log
  exp camsjs/camsjs@orcl file=E:\CAMSJS0421.dmp owner=camsjs


